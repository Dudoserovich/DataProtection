1\. Лабораторная работа выполняется на ОС Kali Linux. В работе
используется консоль (терминал). Вызвать ее возможно, например, перейдя
в пункт приложения и найти там терминал.

2\. Предварительно проверьте наличие других учетных записей (не root).
Удалите их. Для исследования файловых объектов вам потребуются еще два
пользователя, учетные записи которых предстоит создать. Для этого
воспользуйтесь краткой формой команды

useradd --m user1

Аргумент --m предписывает создание домашнего каталога пользователя с его
именем. После этого пользователю необходимо присвоить пароль. Это
делается командой

passwd user1

На запрос введите простой пароль 1234567890.

3\. Повторите команды п. 2 для создания учетной записи пользователя
user2. Помните, что оба пользователя по умолчанию являются членами одной
группы users.

4\. Аналогично откройте третий текстовый терминал и зарегистрируйтесь
как user1.

5\. Откройте второй текстовый терминал и зарегистрируйтесь как user2.

6\. Основная часть задания выполняется с правами обычных пользователей.
Переходите в первую консоль и используйте права root только при
выполнении соответствующих пунктов задания. Помните, что операционная
система не контролирует действий администратора и ваше ошибочное
действие может привести к краху системы. Ориентируйтесь на характерную
форму приглашения к вводу команд, в котором отражены ранг и имя
пользователя.

7\. С правами user1 с помощью команды cd /root попробуйте войти в
каталог суперпользователя. Объясните результат. Затем с помощью команды
ls -la / просмотрите список основных каталогов и укажите, в какие из них
вы имеете право войти.

8\. Проверьте права доступа к домашним каталогам пользователей
/home/user1 и /home/user2: они должны быть установлены в 755.

9\. Переключитесь в консоль администратора и создайте два новых
временных каталога:

mkdir -m 777 /home/temp1

и

mkdir -m 1777 /home/temp2

10\. Вернитесь в консоль user1 и, пользуясь командой mkdir, создайте в
домашнем каталоге пользователя /home/user1 четыре каталога с именами
qu1, qu2, qu3, qu4. При создании каталогов объявите следующие права
доступа к ним: (qu1 - 777, qu2 - 404, qu3 - 1333, qu4 -- 505). Пример:

cd; mkdir -m 777 qu1

С помощью команды ls /home/user1 убедитесь в том, что каталоги созданы.
Какие из предоставленных прав кажутся вам лишенными смысла? Почему?

11\. Задайте права доступа к файлам «по умолчанию». Для этого установите
маску доступа umask 022. Поясните, какие права к вновь создаваемым
файлам и каталогам будут предоставляться пользователю, членам его группы
и остальным.

12\. В каждом из каталогов создайте по три текстовых файла с именами
(jan, feb, mar), (apr, may, jun), (jul, aug, sep), (oct, nov, dec). В
каждый файл запишите

календарь на определенный месяц текущего года. Например, команда ncal 1
2022 \>jan создает в текущем каталоге файл jan и записывает в него
календарь на январь 2022 года. Не забывайте, что использование
относительного (короткого)

имени файла требует, чтобы вы находились в нужном каталоге. В противном
случае следует указывать полный путь к создаваемому файлу. Для навигации
по каталогам используйте команды cd и pwd. В каком случае создание
файлов не удалось? Почему?

13\. С помощью команды chmod установите нужные права доступа в
«недоступные» каталоги qu2, qu4 и создайте там указанные файлы. После
этого верните каталогам прежние права доступа.

14\. С помощью команд cd и ls войдите в каждый из созданных каталогов и
просмотрите список созданных файлов. При просмотре содержимого каталогов
используйте два режима: ls без аргументов и ls -l. В каких случаях не
удалось войти в каталог? В каких случаях не удалось посмотреть список
файлов? Почему?

15\. Прочитайте содержимое одного из файлов в «темном» каталоге
(например, cd /home/user1/qu3; cat aug). Сделайте выводы.

16\. Перейдите во 2-ю консоль и с правами пользователя user2 войдите в
каталог /home/user1/qu1. Создайте в каталоге /home/user2 новый файл
quart1 путем конкатенации нескольких имеющихся:

cat jan feb mar \>/home/user2/quart1

С помощью команды file определите тип созданного файла. Попробуйте
вывести его на экран командой cat. Что представляет собой данный файл?

17\. С помощью команды chmod установите права доступа 077 на созданный
файл quart1. Вновь попробуйте прочесть его. Ответьте, почему владельцу
файла запрещается доступ, если файл доступен для всех? Что необходимо
сделать, чтобы вернуть владельцу права на доступ?

18\. Установите для файла quatr1 права на доступ 4700. Кому и какие
права вы при этом предоставили? Как воспользоваться этими правами? Какие
из предоставленных прав не имеют смысла?

19\. Перейдите в консоль администратора и передайте право владения на
файлы may и aug пользователю user2 (команда chown). Поочередно из
консолей user1 и user2 проверьте, как изменились права владения файлами
после его передачи. Может ли пользователь user2 воспользоваться
предоставленными правами? (Пользователи user1 и user2 при создании
учетных записей по умолчанию отнесены к одной группе users.)

20\. Правами пользователя user1 из каталогов /home/temp1 и /home/temp2 c
помощью команды ln создайте две «жесткие» ссылки на файл dec с именами
dec_h1 и dec_h2

ln /home/user1/qu4/dec /home/temp1/dec_h1

Чем созданные ссылки отличаются от исходного файла?

21\. С помощью команды ln -s создайте из каталогов /home/temp1 и
/home/temp2 две символические ссылки на файл dec с именами dec_s1 и
dec_s2. Чем отличаются созданные ссылки от исходного файла? Попытайтесь
прочитать содержимое файлов символических ссылок. Что они собой
представляют?

22\. Правами пользователя user2 с помощью команды cp создайте в
каталогах /home/temp1 и /home/temp2 по одной копии файла dec с другим
именем (dec_copy1). Чем отличаются исходный файл и его копия (обратите
внимание на то, кто является владельцем исходного файла и его копии)?
Чем отличаются права доступа на эти файлы? Вернитесь в консоль user1.

23\. С правами пользователя user1 создайте жесткие ссылки из его
домашнего каталога на файл /bin/su (доступен обычным пользователям
только на исполнение) и на файл /etc/shadow (для обычных пользователей
недоступен). Ответьте, какими правами на объектовый файл нужно обладать,
чтобы создать

на него жесткую ссылку? Какую выгоду получает обладатель жестких ссылок
на недоступные файлы?

24\. С правами пользователя user1 скопируйте в его домашний каталог
утилиту /bin/mount. Сравните между собой оригинал и копию и укажите все
отличия. Сможет ли пользователь применить копию опасной утилиты во вред
политике безопасности? Почему?

25\. С помощью команды rm удалите файл dec. Что произошло с «жесткими» и
символическими ссылками на данный файл? Что произошло с его копиями? Что
нужно сделать для того, чтобы файл перестал существовать (на логическом
уровне)?

26\. Правами user1 удалите файлы из каталогов /home/temp1 и /home/temp2.
Какие файлы не удалось удалить? Почему? Попробуйте удалить оставшиеся
файлы правами пользователя user2. Объясните результат.

27\. Попробуйте удалить любой из каталогов qu1, qu2, qu3, qu4 с помощью
команды rmdir (не удаляя предварительно из них файлов). Объясните
результат.

28\. Войдите в консоль администратора и с правами root, пользуясь
командой сhattr, заблокируйте файл feb от любых изменений
(предварительно ознакомьтесь с синтаксисом команды). Установите параметр
запрета любых операций, кроме добавления данных для файла mar. Вернитесь
в консоль user1. С помощью команды lsattr -l проверьте наличие
дополнительных атрибутов у файлов.

29\. Правами пользователя user1 добавьте одну строку finish в конец
файлов feb и mar . Воспользуйтесь для этого командой

echo finish \>\> file_name

Убедитесь в успешном завершении операции, объясните результат.

30\. Правами пользователя user1 с помощью команды rm -rf последовательно
удалите ранее созданные каталоги qu2, qu3, qu4 вместе с файлами.
Объясните результат.

31\. С правами пользователя user1 создайте в /home/user1 два каталога
mkdir --m 400 src и mkdir --m 200 dst. Внутри каталога src командой echo
1234567890 \> abc создайте текстовый файл (если для этого прав доступа к
каталогу недостаточно, временно измените их). Для созданного файла
установите права доступа chmod 100 abc.

32\. Манипулируя правами доступа на созданные файловые объекты,
установите минимально необходимые права, позволяющие копировать и
перемещать указанный файл из каталога src в каталог dst. Зафиксируйте
результаты в отчете.

33\. Определите, какие минимально необходимые права на файловые объекты
нужно иметь, чтобы выполнять копирование и перемещение файла от имени
администратора.c

34\. Понаблюдайте и зафиксируйте в отчете изменения временных отметок
файлов и каталогов, происходящие при файловых операциях.
